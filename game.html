<!DOCTYPE html>
<html>
	<head>
		<title>Rock, Paper, Scissors</title>
		<meta charset="UTF-8"/>
	</head>
	<body>
	<script>

		function computerPlay(){
			let computerChoice = ["Rock", "Paper", "Scissors"];
			return computerChoice[Math.floor(Math.random() * computerChoice.length)];
		}


		function playRound(playerSelection, computerSelection){
			let psLower = playerSelection.toLowerCase();
			switch (true){
				case psLower == "rock" && computerSelection == "Rock":
				case psLower == "scissors" && computerSelection == "Scissors":
				case psLower == "paper" && computerSelection == "Paper":
					return "Tie!";
					break;
				case psLower == "scissors" && computerSelection == "Rock":
					return "You lose! Rock beats Scissors";
				case psLower == "paper" && computerSelection == "Scissors":
					return "You lose! Scissors beat paper";
				case psLower == "rock" && computerSelection == "Paper":
					return "You lose! Paper beats rock";
					break;
				case psLower == "paper" && computerSelection == "Rock":
					return "You win... Paper beats Rock";
				case psLower == "rock" && computerSelection == "Scissors":
					return "You win... Rock beats Scissors";
				case psLower == "scissors" && computerSelection == "Paper":
					return "You win... Scissors beat Paper";
					break;
				
				default:
					return "Please enter a valid choice";
				
			}
		}

		function game(){
			let playerScore = 0;
			let computerScore = 0;
			for (let i = 0; i < 5; i++){
				const computerSelection = computerPlay();
				let playerSelection = prompt("Rock, Paper, or Scissors?");
				function checkSelection(){
					if (playerSelection.toLowerCase() != "rock" && playerSelection.toLowerCase() != "paper" 
					&& playerSelection.toLowerCase() != "scissors"){
						let validCheck = prompt("Please choose rock, paper, or scissors");
						if (validCheck.toLowerCase() == "rock" || validCheck.toLowerCase() == "paper" ||  
						validCheck.toLowerCase() == "scissors"){
							return playerSelection = validCheck;
						}else{
							checkSelection();
						};
					};
				}
				checkSelection();
				let result = (playRound(playerSelection, computerSelection));
				console.log(result);
				if (result.slice(0, 7) == "You win"){
					playerScore += 1;
				} else if (result.slice(0, 8) == "You lose"){
					computerScore += 1;
				} else if (result.slice(0, 3) == "Tie"){
					playerScore += 0;
				} else {
					console.log("Something went wrong")
				}
					
			}
			if (playerScore > computerScore){
				console.log(`You win... Score: Computer: ${computerScore}, You: ${playerScore}`);
			} else if (computerScore > playerScore){
				console.log(`You lose! Score: Computer: ${computerScore}, You: ${playerScore}`);
			} else if  (playerScore == computerScore) {
				console.log(`Tie. Score: Computer: ${computerScore}, You: ${playerScore}`);
			} else {
				console.log("Somethings off...");
			}
		}
		
				
		console.log(game());

	</script>
	</body>
</html>
